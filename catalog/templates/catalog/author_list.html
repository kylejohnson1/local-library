{% extends "base_generic.html" %}

{% block content %}
    <h1>Authors</h1>
    {% if perms.catalog.can_edit_authors %}
        <p><a href="{% url 'author_create' %}">Create Author</a></p>
    {% endif %}
    <p>Here you can browse a list of all authors with books available from LocalLibrary.</p>
    {% if author_list %}
    <table class="table table-dark table-hover">
        <thead>
            <tr>
                <th>Name</th>
                <th>Books</th>
            </tr>
        </thead>
        <tbody>
        {% for author in author_list %}
            <tr>
                <td><a href="{{ author.get_absolute_url }}" >{{ author.first_name }} {{ author.last_name }}</a></td>
                <td>{{ author.book_set.all|join:", " }}</td><!-- author.book_set.all returns all book records where the ForeignKey 'author' field is associated with this author -->
            </tr>
        {% endfor %}
        </table>
    {% else %}
        <p>There are no authors in the library database.</p>
    {% endif %}
{% endblock %}